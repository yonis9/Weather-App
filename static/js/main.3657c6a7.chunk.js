(this["webpackJsonpweather-app-herolo"]=this["webpackJsonpweather-app-herolo"]||[]).push([[0],{64:function(e,t,n){e.exports=n(92)},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},78:function(e,t,n){},79:function(e,t,n){},80:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){},84:function(e,t,n){},85:function(e,t,n){},92:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(8),o=n.n(c),i=n(10),u=n(47),l=(n(73),n(17)),s=function(e){return e.app},E=Object(l.a)(s,(function(e){return e.isCelsius})),f=Object(l.a)(s,(function(e){return e.lightBackground})),h=Object(l.a)(s,(function(e){return e.route})),m=function(e){return e.home},d=Object(l.a)(m,(function(e){return e.location})),T=(Object(l.a)(m,(function(e){return e.searchOutputs})),Object(l.a)(m,(function(e){return e.weather}))),p=Object(l.a)(m,(function(e){return e.error})),S={CHANGE_LOCATION:"CHANGE_LOCATION",TOGGLE_FAVORITE:"TOGGLE_FAVORITE",REQUEST_SEARCH_START:"REQUEST_SEARCH_START",REQUEST_SEARCH_SUCCESS:"REQUEST_SEARCH_SUCCESS",REQUEST_SEARCH_FAILED:"REQUEST_SEARCH_FAILED",REQUEST_FORCAST_START:"REQUEST_FORCAST_START",REQUEST_FORCAST_SUCCESS:"REQUEST_FORCAST_SUCCESS",REQUEST_FORCAST_FAILED:"REQUEST_FORCAST_FAILED"},v=function(e){return{type:S.CHANGE_LOCATION,payload:e}},O=(n(74),{TOGGLE_UNIT:"TOGGLE_UNIT",TOGGLE_DAY_NIGHT:"TOGGLE_DAY_NIGHT",CHANGE_ROUTE:"CHANGE_ROUTE"}),_=function(e){return{type:O.CHANGE_ROUTE,payload:e}},g=Object(i.b)(null,(function(e){return{changeRoute:function(t){return e(_(t))}}}))((function(e){var t=e.changeRoute;return r.a.createElement("nav",null,r.a.createElement("h3",null,"Weather App"),r.a.createElement("ul",null,r.a.createElement("li",{onClick:function(){return t("home")}},"HOME"),r.a.createElement("li",{onClick:function(){return t("favorites")}},"FAVORITES")))})),C=Object(i.b)(null,(function(e){return{toggleDayNight:function(){return e({type:O.TOGGLE_DAY_NIGHT})}}}))((function(e){var t=e.toggleDayNight;return r.a.createElement("label",{className:"switch"},r.a.createElement("input",{type:"checkbox",onClick:t}),r.a.createElement("span",{className:"slider round"}))})),y=n(128),A=n(129),R=(n(75),Object(i.b)((function(e){return{searchOutputs:e.home.searchOutputs}}),(function(e){return{getSearchOutput:function(t){return e(function(e){return function(t){t({type:S.REQUEST_SEARCH_START}),fetch("https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=".concat("c5DzvqZcnpojKGCNnG5ri2ERBAssSefZ","&q=").concat(e,"&language=en-us")).then((function(e){return e.json()})).then((function(e){return t({type:S.REQUEST_SEARCH_SUCCESS,payload:e})})).catch((function(e){return t({type:S.REQUEST_SEARCH_FAILED,payload:e})}))}}(t))},setLocation:function(t){return e(v(t))}}}))((function(e){var t=e.getSearchOutput,n=e.searchOutputs,a=e.setLocation;return r.a.createElement("div",{id:"search-con"},r.a.createElement(A.a,{id:"combo-box-demo",options:n,getOptionLabel:function(e){return e.LocalizedName+", "+e.Country.LocalizedName},onChange:function(e,t){return a(t)},style:{width:"50%"},renderInput:function(e){return r.a.createElement(y.a,Object.assign({},e,{label:"Choose your location",variant:"outlined",fullWidth:!0,onChange:function(e){return e.target.value.length>2?t(e.target.value):null}}))}}))}))),b=function(e){return e.favorites.favorites},G=Object(l.a)([b,d],(function(e,t){return Boolean(e.find((function(e){return e.Key===t.Key})))})),F=(Object(l.a)(b,(function(e){return e.favoritesWeather})),Object(i.b)((function(e){return{isCelsius:e.app.isCelsius}}),(function(e){return{toggleUnit:function(){return e({type:O.TOGGLE_UNIT})}}}))((function(e){var t=e.isCelsius,n=e.toggleUnit;return r.a.createElement("h3",{className:"toggle-unit",onClick:n},t?"C":"F")}))),j={TOGGLE_FAVORITE:"TOGGLE_FAVORITE",GET_FAVORITES_WEATHER_START:"GET_FAVORITES_WEATHER_START",GET_FAVORITES_WEATHER_SUCCESS:"GET_FAVORITES_WEATHER_SUCCESS",GET_FAVORITES_WEATHER_FAILED:"GET_FAVORITES_WEATHER_FAILED"},I=n(32),N=n(49),U=Object(i.b)((function(e){return{location:d(e),isFavorite:G(e)}}),(function(e){return{toggleFavorite:function(t){return e(function(e){return{type:j.TOGGLE_FAVORITE,payload:e}}(t))}}}))((function(e){var t=e.toggleFavorite,n=e.isFavorite,a=e.location;return r.a.createElement("div",{onClick:function(){return t(a)}},r.a.createElement(I.a,{icon:N.a,size:"2x",className:"".concat(n?"star favorite":"star")}))})),L=(n(78),function(e){var t=e.day,n=e.date,a=e.minTemp,c=e.maxTemp,o=e.tempUnit,i=e.icon;return i=i.toString().length<2?"0"+i:i,r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"date"},r.a.createElement("h4",null,t),r.a.createElement("h4",null,n)),r.a.createElement("img",{alt:"icon",src:"https://developer.accuweather.com/sites/default/files/".concat(i,"-s.png")}),r.a.createElement("h4",null,c,"\xb0/",a,"\xb0 ",o))}),w=(n(79),function(e){var t=e.fiveDayForcast;return r.a.createElement("div",{id:"daylist"},t.DailyForecasts.map((function(e,t){return r.a.createElement(L,{key:t,minTemp:Math.round(e.Temperature.Minimum.Value),maxTemp:Math.round(e.Temperature.Maximum.Value),tempUnit:e.Temperature.Maximum.Unit,icon:e.Day.Icon,day:new Date(1e3*e.EpochDate).toString().slice(0,3),date:new Date(1e3*e.EpochDate).toString().slice(4,15)})})))}),H=(n(80),Object(i.b)((function(e){return{favorites:b(e),location:d(e),weather:T(e),isCelsius:E(e)}}),(function(e){return{getForcast:function(t,n){return e(function(e,t){return function(n){n({type:S.REQUEST_FORCAST_START}),fetch("https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(e,"?apikey=").concat("c5DzvqZcnpojKGCNnG5ri2ERBAssSefZ","&details=false&metric=").concat(t)).then((function(e){return e.json()})).then((function(t){fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(e,"?apikey=").concat("c5DzvqZcnpojKGCNnG5ri2ERBAssSefZ")).then((function(e){return e.json()})).then((function(e){return n({type:S.REQUEST_FORCAST_SUCCESS,payload:{fiveDayForcast:t,currentConditions:e}})}))})).catch((function(e){return n({type:S.REQUEST_FORCAST_FAILED,payload:!0})}))}}(t,n))}}}))((function(e){var t,n=e.getForcast,c=e.weather,o=e.location,i=e.isCelsius,u=e.favorites,l=c.currentConditions,s=c.fiveDayForcast;return(t=l.length?l[0].WeatherIcon:null)&&(t=t.toString().length<2?"0"+t:t),Object(a.useEffect)((function(){n(o.Key,i)}),[o.Key,i,n,u]),l.length?r.a.createElement("div",{id:"CurrentWeather-con"},r.a.createElement("div",{id:"header"},r.a.createElement("h3",null,o.LocalizedName,", ",o.Country.LocalizedName),r.a.createElement("div",{id:"right-box-header"},r.a.createElement(U,null),r.a.createElement(F,null))),r.a.createElement("img",{alt:"icon",src:"https://developer.accuweather.com/sites/default/files/".concat(t,"-s.png")}),r.a.createElement("h1",null,l[0].WeatherText),i?r.a.createElement("h4",null,Math.round(l[0].Temperature.Metric.Value),"\xb0 Celsius"):r.a.createElement("h4",null,Math.round(l[0].Temperature.Imperial.Value),"\xb0 Fahrenheit"),r.a.createElement("div",{id:"five-day-con"},r.a.createElement("h4",null,s.Headline.Text),r.a.createElement(w,{fiveDayForcast:s}))):r.a.createElement("h1",null,"loading")}))),D=function(){return r.a.createElement("div",null,r.a.createElement(R,null),r.a.createElement(H,null))},k=(n(81),Object(i.b)((function(e){return{isCelsius:E(e)}}),(function(e){return{setLocation:function(t){return e(v(t))},changeRoute:function(t){return e(_(t))}}}))((function(e){var t=e.id,n=e.name,a=e.country,c=e.weatherText,o=e.icon,i=e.temp,u=e.isCelsius,l=e.setLocation,s=e.changeRoute;return o=o.toString().length<2?"0"+o:o,r.a.createElement("div",{id:"fav-card",onClick:function(){s("home"),l({Key:t,LocalizedName:n,Country:{LocalizedName:a}})}},r.a.createElement("div",{className:"card"},r.a.createElement("h4",null,n,", ",a),u?r.a.createElement("h4",null,Math.round(i.Metric.Value),"\xb0 Celsius"):r.a.createElement("h4",null,Math.round(i.Imperial.Value),"\xb0 Fahrenheit"),r.a.createElement("img",{alt:"icon",src:"https://developer.accuweather.com/sites/default/files/".concat(o,"-s.png")}),r.a.createElement("h4",null,c)))}))),W=(n(82),Object(i.b)((function(e){return{favoritesWeather:e.favorites.favoritesWeather}}))((function(e){var t=e.favoritesWeather,n=e.isCelsius,a=e.onFavCardClick;return r.a.createElement("div",{id:"favlist"},t.map((function(e){return r.a.createElement(k,{id:e.id,key:e.id,name:e.name,country:e.country,weatherText:e.weatherText,icon:e.icon,temp:e.temp,isCelsius:n,onFavCardClick:a})})))}))),V=(n(83),Object(i.b)((function(e){return{favorites:b(e),isCelsius:E(e)}}),(function(e){return{getFavoritesWeather:function(t){return e(function(e){return function(t){if(t({type:j.GET_FAVORITES_WEATHER_START}),e.length){var n=e.map((function(e){return fetch("https://dataservice.accuweather.com/currentconditions/v1/".concat(e.Key,"?apikey=").concat("c5DzvqZcnpojKGCNnG5ri2ERBAssSefZ")).then((function(e){return e.json()}))}));Promise.all(n).then((function(t){return t.map((function(t,n){return{id:e[n].Key,name:e[n].LocalizedName,country:e[n].Country.LocalizedName,weatherText:t[0].WeatherText,icon:t[0].WeatherIcon,temp:t[0].Temperature}}))})).then((function(e){return t({type:j.GET_FAVORITES_WEATHER_SUCCESS,payload:e})})).catch((function(e){return t({type:j.GET_FAVORITES_WEATHER_FAILED,payload:e})}))}else t({type:j.GET_FAVORITES_WEATHER_SUCCESS,payload:[]})}}(t))}}}))((function(e){var t=e.favorites,n=e.getFavoritesWeather;e.isCelsius;return Object(a.useEffect)((function(){n(t)}),[n,t]),r.a.createElement("div",null,r.a.createElement("div",{id:"fav-con"},r.a.createElement("h1",null,"Your Favorites Places"),r.a.createElement(F,null)),t.length?r.a.createElement("div",{id:"five-day-con"},r.a.createElement(W,null)):r.a.createElement("h1",{className:"no-favs"},"You have no favorites places yet"))}))),Q=n(36),x=n(23),z=n(50),B=n(51),K=n(54),P=function(e){function t(e){var n;return Object(Q.a)(this,t),(n=Object(z.a)(this,Object(B.a)(t).call(this,e))).state={hasError:!1},n}return Object(K.a)(t,e),Object(x.a)(t,[{key:"componentDidCatch",value:function(e,t){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("h1",null,"Someting went wrong"):this.props.children}}]),t}(a.Component),M=(n(84),n(42)),Z=function(){return r.a.createElement("div",{id:"footer"},r.a.createElement("h3",null,"Please note that the app can handle only 50 weather foracst requests a day"),r.a.createElement("div",{id:"social"},r.a.createElement("a",{href:"https://github.com/yonis9",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(I.a,{icon:M.a,size:"2x"})),r.a.createElement("a",{href:"https://www.linkedin.com/in/yonisisso/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(I.a,{icon:M.b,size:"2x"}))))},q=(n(85),Object(i.b)((function(e){return{route:h(e),lightBackground:f(e),error:p(e)}}),(function(e){return{setLocation:function(t){return e(v(t))}}}))((function(e){var t=e.route,n=e.lightBackground,c=e.setLocation,o=e.error;Object(a.useEffect)((function(){o&&alert("We are sorry, the app's allowed number of forcast requests has been exceeded")}),[o]),Object(a.useEffect)((function(){n?(document.getElementsByTagName("body")[0].style.backgroundColor="#f2f2f2",document.getElementsByTagName("body")[0].style.color="#333"):(document.getElementsByTagName("body")[0].style.backgroundColor="#333",document.getElementsByTagName("body")[0].style.color="#f2f2f2")}),[n]),Object(a.useEffect)((function(){i()}),[]);var i=function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(u)},u=function(e){var t=e.coords.latitude,n=e.coords.longitude;fetch("http://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=".concat("c5DzvqZcnpojKGCNnG5ri2ERBAssSefZ","&q=").concat(t,",").concat(n)).then((function(e){return e.json()})).then((function(e){c(e)})).catch((function(e){return console.log(e)}))};return r.a.createElement("div",{className:"App"},r.a.createElement(g,null),r.a.createElement(P,null,r.a.createElement(C,null),"home"===t?r.a.createElement(D,null):r.a.createElement(V,null),r.a.createElement(Z,null)))}))),Y=n(18),J=n(38),$=(n(86),n(52)),X=n(53),ee=n.n(X),te=n(12),ne={location:{Version:1,Key:"215854",Type:"City",Rank:31,LocalizedName:"Tel Aviv",Country:{ID:"IL",LocalizedName:"Israel"},AdministrativeArea:{ID:"TA",LocalizedName:"Tel Aviv"}},searchOutputs:[],isPending:!1,error:!1,weather:{fiveDayForcast:{},currentConditions:[]}},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S.CHANGE_LOCATION:return Object(te.a)({},e,{location:t.payload});case S.REQUEST_SEARCH_START:return Object(te.a)({},e,{isPending:!0});case S.REQUEST_SEARCH_SUCCESS:return Object(te.a)({},e,{searchOutputs:t.payload,isPending:!1,error:!1});case S.REQUEST_SEARCH_FAILED:return Object(te.a)({},e,{isPending:!1,error:!0});case S.REQUEST_FORCAST_START:return Object(te.a)({},e,{isPending:!0});case S.REQUEST_FORCAST_SUCCESS:return Object(te.a)({},e,{weather:t.payload,isPending:!1,error:!1});default:return e}},re={isCelsius:!0,lightBackground:!0,route:"home"},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O.TOGGLE_UNIT:return Object(te.a)({},e,{isCelsius:!e.isCelsius});case O.TOGGLE_DAY_NIGHT:return Object(te.a)({},e,{lightBackground:!e.lightBackground});case O.CHANGE_ROUTE:return Object(te.a)({},e,{route:t.payload});default:return e}},oe=n(16),ie=function(e,t){return t.find((function(t){return t.Key===e.Key}))?t.filter((function(t){return t.Key!==e.Key})):[].concat(Object(oe.a)(t),[e])},ue={favorites:[],favoritesWeather:[],isPending:!1,error:null},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j.TOGGLE_FAVORITE:return Object(te.a)({},e,{favorites:ie(t.payload,e.favorites)});case j.GET_FAVORITES_WEATHER_START:return Object(te.a)({},e,{isPending:!0});case j.GET_FAVORITES_WEATHER_SUCCESS:return Object(te.a)({},e,{favoritesWeather:t.payload,isPending:!1,error:null});case j.GET_FAVORITES_WEATHER_FAILED:return Object(te.a)({},e,{isPending:!1,error:t.payload});default:return e}},se={key:"root",storage:ee.a,whitelist:["favorites"]},Ee=Object(Y.c)({app:ce,home:ae,favorites:le}),fe=Object(J.a)(se,Ee),he=[$.a];var me=Object(Y.d)(fe,Y.a.apply(void 0,he)),de=Object(J.b)(me);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(89).config(),o.a.render(r.a.createElement(i.a,{store:me},r.a.createElement(u.a,{persistor:de},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[64,1,2]]]);
//# sourceMappingURL=main.3657c6a7.chunk.js.map